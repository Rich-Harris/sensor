(function(e){"use strict";var t,n,o,r,s,c,l,u,a;t=function(e){var t;if(e||(e=window),"string"==typeof e&&(e=a(e),!e))throw Error("Could not find specified element");if(e.__sensor)return e.__sensor;if(!(e instanceof Node||e instanceof Window))throw Error("Object must be a DOM node, or the window object");return t=Object.create(n),t.el=e,t.listeners={},t.boundEvents={},e.__sensor=t,t},n={on:function(e,t,n){var o,r,i,s,c,l,u=this;if("object"==typeof e){s=e,o=[];for(c in s)s.hasOwnProperty(c)&&("function"==typeof s[c]?(n=s[c],-1!==(l=c.indexOf(" "))?(e=c.substr(0,l),t=c.substring(l+1)):(e=c,t=null)):"object"==typeof s[c]&&(e=c,t=s[c].childSelector,n=s[c].handler),r={eventName:e,childSelector:t,handler:n},this._addListener(r));return{cancel:function(){if(!i){for(;o.length;)u.off(o.pop());i=!0}}}}return n||(n=t,t=null),r={eventName:e,childSelector:t,handler:n},this._addListener(r),{cancel:function(){i||(u.off(r),i=!0)}}},off:function(e,t,n){var o,r,i,s,c,l=this;s=function(e){delete l.listeners[e],l.boundEvents[e].teardown(),delete l.boundEvents[e]};{if(arguments.length){if(1===arguments.length){if("object"==typeof e){if(r=e,e=r.eventName,o=this.listeners[e],!o)return;if(i=o.indexOf(r),-1===i)return;return o.splice(i,1),o.length||s(e),void 0}return s(e),void 0}if(2===arguments.length){if("function"!=typeof t)return o=this.listeners[e],o&&(this.listeners[e]=o.filter(function(e){return e.childSelector!==t}),this.listeners[e].length||s(e)),void 0;n=t,t=null}return this.listeners[e]?(this.listeners[e]=t?this.listeners[e].filter(function(e){return e.childSelector!==t||e.handler!==n}):this.listeners[e].filter(function(e){return e.childSelector||e.handler!==n}),this.listeners[e].length||s(e),void 0):void 0}for(c in this.boundEvents)this.boundEvents.hasOwnProperty(c)&&s(c)}},once:function(e,t,n){var o;return 2===arguments.length&&(n=t,t=null),o=this.on(e,t,function(){n.apply(this,arguments),o.cancel()})},_addListener:function(e){var t=e.eventName;this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e),this._bindEvent(t)},_bindEvent:function(e){var t,n=this;t=o[e],t||(t=u(e)),this.boundEvents[e]||(this.boundEvents[e]=!0,this.boundEvents[e]=t.call(null,this.el,this,function(){var t,o,r,i,c;for(t=n.listeners[e].slice(),r=0;t.length>r;r+=1)if(o=t[r],o.childSelector){if(i=this,i===n.el)continue;for(;!c&&i!==n.el;)s(i,o.childSelector)&&(c=i),i=i.parentNode;c&&o.handler.apply(c,arguments)}else o.handler.apply(n.el,arguments)}))}},o={},t.define=function(e,t){o[e]=t},function(e){e.matches=e.matches||e.matchesSelector||e.mozMatches||e.mozMatchesSelector||e.msMatches||e.msMatchesSelector||e.oMatches||e.oMatchesSelector||e.webkitMatches||e.webkitMatchesSelector}(Element.prototype),t.patch=function(){r||([Node.prototype,Window.prototype].forEach(function(e){e.on=function(){this.__sensor=t(this),this.__sensor.on.apply(this.__sensor,arguments)},e.off=function(){this.__sensor=t(this),this.__sensor.off.apply(this.__sensor,arguments)}}),r=!0)},c=/^\.([^ ]+)$/,s=function(e,t){var n,o;if("string"==typeof t){if(e.matches)return e.matches(t);if(e.tagName.toLowerCase()===t.toLowerCase())return!0;if(n=c.exec(t))return o=l[t]||function(){return l[t]=RegExp("\\s*"+t+"\\s*")}(),e.className.test(o);throw"This browser does not support matches (aka matchesSelector) - either polyfill it (see e.g. https://github.com/termi/CSS_selector_engine) or only use class names, element arrays, or functions as child selectors"}if("function"==typeof t)return t(e);if(t.length){for(i=t.length;i--;)if(t[i]===e)return!0;return!1}throw"Illegal child selector"},a=function(e){var t;return document.querySelector&&(t=document.querySelector(e))?t:"#"===e.charAt(0)&&(t=document.getElementById(e.substring(1)))?t:document.getElementById(e)},u=function(e){var n=function(t,n,o){var r=function(e){o.call(e.target,e)};return t.addEventListener(e,r),{teardown:function(){t.removeEventListener(e,r)}}};return t.define(e,n),n},function(e){e.define("doubletap",function(e,t,n){var o,r,i;return o=5,r=500,i=t.on("tap",function(e,i){var s=t.on("tap",function(t,r,s){var c=Math.abs(e-t),l=Math.abs(i-r);o>=c&&o>=l&&n(t,r,s)});setTimeout(s.cancel,r)}),{teardown:i.cancel}})}(t),function(e){e.define("pullstart",function(e,t,n){var o=t.on("mousedown",function(e){var o,r;o=e.offsetX,r=e.offsetY,t.pull={start:{x:o,y:r},last:{x:o,y:r}},n(o,r,e)});return{teardown:o.cancel}}),e.define("pull",function(e,t,n){var o=t.on("pullstart",function(){var o;o=t.on("mousemove",function(o){var r,i;r=o.offsetX,i=o.offsetY,n.call(e,r-t.pull.last.x,i-t.pull.last.y),t.pull.last.x=r,t.pull.last.y=i}),t.once("mouseup",o.cancel)});return{teardown:o.cancel}}),e.define("pullend",function(e,t,n){var o=t.on("pullstart",function(){t.once("mouseup",function(t,o,r){n.call(e,t,o,r)})});return{teardown:o.cancel}})}(t),function(e){var t=e(window);e.define("tap",function(e,n,o){var r,i,s,c;return r=5,i=200,s=n.on("mousedown",function(e){var n,s,c,l,u,a;u=e.clientX,a=e.clientY,c=function(){l||(s.cancel(),n.cancel(),l=!0)},s=t.on("mouseup",function(t){o.call(e.target,e.offsetX,e.offsetY,t),c()}),n=t.on("mousemove",function(e){var t=e.clientX,n=e.clientY;(Math.abs(t-u)>r||Math.abs(n-a)>r)&&c()}),setTimeout(c,i)}),c=n.on("touchstart",function(e){var n,s,c,l,u,a,f,h,d,m,p;1===e.touches.length&&(n=e.touches[0],s=n.identifier,c=n.target,l=n.clientX,u=n.clientY,m=function(){p||(a.cancel(),h.cancel(),f.cancel(),d.cancel(),p=!0)},a=t.on("touchstart",m),h=t.on("touchend",function(e){o.call(c,n.offsetX,n.offsetY,e),m()}),f=t.on("touchmove",function(e){var t,n,o;t=e.touches[0],n=t.clientX,o=t.clientY,(Math.abs(n-l)>r||Math.abs(o-u)>r)&&m()}),setTimeout(m,i))}),{teardown:function(){s.cancel(),c.cancel()}}})}(t),e.module!==void 0&&e.module.exports?e.module.exports=t:e.define!==void 0&&e.define.amd?e.define(function(){return t}):e.sensor=t})(this);